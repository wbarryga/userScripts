// ==UserScript==
// @name         LinkedIn tools Beta
// @namespace    http://tampermonkey.net/
// @version      0.6.1
// @description  GUI buttons that add additional functionalities
// @author       You
// @match        https://www.linkedin.com/recruiter/profile/*
// @require      https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js
// @require      https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js
// @grant        none
// ==/UserScript==
/* jshint -W097 */
function partner() {
	var companyName = document.querySelectorAll("#profile-experience > div.module-body > ul > li:nth-child(1) > div > h5 > a")[0].textContent;
	var url = "https://locatr.cloudapps.cisco.com/WWChannels/LOCATR/performBasicSearch.do?keyWord=" + companyName + "&country=US";
	window.open(url);
}
function avature() {
	var name = document.querySelectorAll(".profile-info > h1.searchable")[0].textContent;
	var nameArr = name.split(" ");
	var first = nameArr[0];
	var last = nameArr[1];
	var url1 = "https://ciscorecruiting.avature.net/#People/Id:1/Filters:{\"entityTypeId\":2,\"set\":{\"filters\":[{\"name\":\"fullName\",\"op\":\"hasWord\",\"value\":" + "\"" + first + " " + last +"\"}],\"isAnd\":true}}";
	window.open(url1);
}

setTimeout(function() {
		// add jquery UI for interface
		$('head').append("<link href='https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/start/jquery-ui.css' rel='stylesheet' type='text/css'>");
		//remove the text "recruiter tools" to make room for the buttons
		$('#recruiter-toolbox > div.module-header > h2').text("");
		// adds custom buttons
		$('#recruiter-toolbox > div.module-header > h2').append("<button class='mybutton' id='1button'>Partner</button>");
		$('#recruiter-toolbox > div.module-header > h2').append("<button class='mybutton' id='2button'>Avature</button>");
		$('.mybutton').button();
		$('.mybutton').css({
			'font-size' : '12px',
			'width': '125px',
			'height' : '20px'
		});
		$('#1button').css("float", "left");
		$('#2button').css("float", "right");
		//Attach functions to the recruiter tools buttons
		$('#1button').on("click", partner);
		$('#2button').on("click", avature);
},4500);
